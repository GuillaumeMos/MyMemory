(this["webpackJsonpmy-app3"]=this["webpackJsonpmy-app3"]||[]).push([[0],{15:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var n=s(3),r=s(4),a=s(6),i=s(5),c=s(0),o=s(1),u=s.n(o),l=s(9),h=s.n(l),d=(s(15),s.p+"static/media/card_back.2d508119.png"),j=s(8),f=function(t){Object(a.a)(s,t);var e=Object(i.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return Object(c.jsx)("button",{className:"square",onClick:this.props.onClick,children:this.props.displayed?Object(c.jsx)("img",{src:this.props.image,alt:"Logo"}):Object(c.jsx)("img",{src:d,alt:"Logo"})})}}]),s}(u.a.Component),b=function(t){Object(a.a)(s,t);var e=Object(i.a)(s);function s(t){var r;return Object(n.a)(this,s),(r=e.call(this,t)).state={board:r.setupBoard(t.count),items:r.setupItems(t.count),enabled:!0,first:null,second:null,chrono:0,chronoInterval:setInterval((function(){r.setState((function(t){return t.chrono++}))}),1e3),score:0},r}return Object(r.a)(s,[{key:"setupItems",value:function(t){for(var e=[],s=0;s<t;s++)e[s]={validated:!1,txt:s.toString(),image:"/images/card_".concat(s,".jpg")};return e}},{key:"setupBoard",value:function(t){for(var e=[],s=0;s<2*t;s++)e.push(Math.floor(s/2));return e=function(t){var e,s,n=t.length;for(;0!==n;)s=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[s],t[s]=e;return t}(e)}},{key:"hasNiceTime",value:function(t,e){return 4===t&&e<=10||7===t&&e<=20||10===t&&e<=30}},{key:"resetGame",value:function(){var t=this;clearInterval(this.state.chronoInterval),this.setState({board:this.setupBoard(this.props.count),items:this.setupItems(this.props.count),enabled:!0,first:null,second:null,chrono:0,chronoInterval:setInterval((function(){t.setState((function(t){return t.chrono++}))}),1e3),score:0})}},{key:"renderSquare",value:function(t){var e=this,s=this.state.board[t];return Object(c.jsx)(f,{txt:this.state.items[s].txt,image:this.state.items[s].image,displayed:!0===this.state.items[s].validated||this.state.first===t||this.state.second===t,onClick:function(){return e.handleSquareClick(t)}},t)}},{key:"hasWon",value:function(){return 0===this.state.items.filter((function(t){return!t.validated})).length}},{key:"handleSquareClick",value:function(t){var e=this;if(this.state.enabled&&this.state.first!==t&&!this.state.items[this.state.board[t]].validated){var s=this.state;if(null===s.first)s.first=t,this.setState(s);else{s.second=t;var n=s.board[s.first];n===s.board[s.second]?(s.items[n].validated=!0,s.first=null,s.second=null,s.score+=3,this.setState(s)):(s.enabled=!1,s.score-=1,this.setState(s),setTimeout((function(){s.first=null,s.second=null,s.enabled=!0,e.setState(s)}),1e3))}if(this.hasWon()){clearInterval(this.state.chronoInterval);var r=new j.a;r.set("user_time_".concat(this.props.username),this.state.chrono);var a=this.state.score;this.hasNiceTime(parseInt(this.props.count,10),this.state.chrono)&&(a+=5,this.setState((function(t){return t.score+=5}))),r.set("last_user_score",a),r.set("user_score_"+this.props.username,a),this.setState((function(t){return t.enabled=!1}))}}}},{key:"render",value:function(){var t,e=this,s=new j.a,n=this.hasWon();if(n)t="GG bro";else{var r=s.get("last_user_score");t="Hey ".concat(this.props.username,", bonne chance ! "),t+=null!=r?"Le dernier score est ".concat(r):"Il n'y pas de score enregistr\xe9"}var a=this.state.board.map((function(t,s){return e.renderSquare(s)})),i=Object.entries(s.getAll()).filter((function(t){return t[0].startsWith("user_score_")})).map((function(t){var e=t[0].replace("user_score_","");return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e}),Object(c.jsx)("td",{children:t[1]}),Object(c.jsxs)("td",{children:[s.get("user_time_".concat(e)),"s"]})]},e)})),o=n?Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Nom"}),Object(c.jsx)("th",{children:"Score"}),Object(c.jsx)("th",{children:"Temps"})]})}),Object(c.jsx)("tbody",{children:i})]}):"";return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"status",children:t}),Object(c.jsxs)("div",{className:"status",children:["Score : ",this.state.score]}),Object(c.jsxs)("div",{className:"status",children:["Temps actuel : ",this.state.chrono,"s"]}),Object(c.jsx)("button",{onClick:function(){return e.resetGame()},children:"Reset"}),Object(c.jsx)("div",{children:o}),Object(c.jsx)("div",{className:"board-row",children:a})]})}}]),s}(u.a.Component),v=function(t){Object(a.a)(s,t);var e=Object(i.a)(s);function s(t){var r;return Object(n.a)(this,s),(r=e.call(this,t)).state={username:null,difficulty:null,ready:!1},r}return Object(r.a)(s,[{key:"gameBoard",value:function(){return this.state.ready?Object(c.jsx)(b,{username:this.state.username,count:this.state.difficulty}):this.renderLogin()}},{key:"renderLogin",value:function(){var t,e,s=this;return Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{type:"text",name:"username",value:null!==(t=this.state.username)&&void 0!==t?t:"",onChange:function(t){s.setState((function(e){return e.username=t.target.value}))}}),Object(c.jsxs)("select",{value:null!==(e=this.state.difficulty)&&void 0!==e?e:0,onChange:function(t){s.setState((function(e){return e.difficulty=t.target.value}))},children:[Object(c.jsx)("option",{value:"0",children:"S\xe9lectionner une difficult\xe9"}),Object(c.jsx)("option",{value:"4",children:"Facile"}),Object(c.jsx)("option",{value:"7",children:"Moyen"}),Object(c.jsx)("option",{value:"10",children:"Difficile"})]}),Object(c.jsx)("button",{onClick:function(){s.state.difficulty&&s.state.difficulty>0&&s.state.username&&s.setState((function(t){return t.ready=!0}))},children:"GO"})]})}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"game",children:[Object(c.jsx)("div",{className:"game-board",children:this.gameBoard()}),Object(c.jsxs)("div",{className:"game-info",children:[Object(c.jsx)("div",{}),Object(c.jsx)("ol",{})]})]})}}]),s}(u.a.Component);h.a.render(Object(c.jsx)(v,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.fecb8306.chunk.js.map